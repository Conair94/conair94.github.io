{% include base_path %}

<!-- start custom head snippets -->

<!-- Support for Academicons -->
<link rel="stylesheet" href="{{ base_path }}/assets/css/academicons.css"/>

<!-- favicon from https://commons.wikimedia.org/wiki/File:OOjs_UI_icon_academic-progressive.svg -->
<link rel="apple-touch-icon" sizes="180x180" href="{{ base_path }}/images/apple-touch-icon-180x180.png"/>
<link rel="icon" type="image/svg+xml" href="{{ base_path }}/images/favicon.svg"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-32x32.png" sizes="32x32"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-192x192.png" sizes="192x192"/>
<link rel="manifest" href="{{ base_path }}/images/manifest.json"/>
<link rel="icon" href="/images/favicon.ico"/>
<meta name="theme-color" content="#ffffff"/>

<style>
/* ==========================================================================
   Background Slideshow & Layout
   ========================================================================== */

body {
  background-color: #ffffff;
  /* Initial background - will be updated by JS */
  background-size: cover;
  background-attachment: fixed;
  background-position: center;
  background-repeat: no-repeat;
  transition: background-image 1s ease-in-out; 
}

/* Ensure content is readable on top of the art */
.masthead {
    background-color: #fff;
    border-bottom: 4px solid #000;
    position: relative;
    z-index: 100;
}

#main {
    background-color: #fff;
    padding: 2em;
    border: 4px solid #000;
    margin-top: 2em;
    margin-bottom: 2em;
    box-shadow: 10px 10px 0px rgba(0,0,0,0.2);
    /* Ensure it respects the container width */
    max-width: 1280px; 
    margin-left: auto; 
    margin-right: auto;
}

.page__footer {
    background-color: #fff;
    border-top: 4px solid #000;
    padding-top: 2em;
    position: relative;
    z-index: 100;
}

/* Adjust small screen margins */
@media (max-width: 600px) {
    #main {
        margin: 1em;
        padding: 1em;
    }
}
</style>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    var images = [
      {% for file in site.static_files %}
        {% if file.path contains 'assets/backgrounds/' %}
          "{{ file.path | relative_url }}",
        {% endif %}
      {% endfor %}
    ];

    // Filter out potential non-image files (like .DS_Store)
    images = images.filter(function(url) {
      return url.match(/\.(jpeg|jpg|gif|png)$/i);
    });

    if (images.length > 0) {
      var currentIndex = 0;
      
      // Set initial background
      document.body.style.backgroundImage = "url('" + images[currentIndex] + "')";

      // Preload images to prevent flickering
      images.forEach(function(src) {
        var img = new Image();
        img.src = src;
      });

      setInterval(function() {
        currentIndex = (currentIndex + 1) % images.length;
        document.body.style.backgroundImage = "url('" + images[currentIndex] + "')";
      }, 30000); // 30 seconds
    }
  });
</script>

<!-- end custom head snippets -->